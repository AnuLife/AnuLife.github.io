<!DOCTYPE html>
<html lang="zh-CN">
  <head>
  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no"
  />
  <meta name="description" content="Anuluca的个人网站" />
  <meta
    name="keywords"
    content="anuluca,路卡,路卡的自由庭院岛,前端开发,vue,javascript"
  />
  
  <link rel="icon" href="/favicon.png" />
  

  <title>
     常用utils整合 - 路卡的自由庭院岛 
  </title>

  <!-- jq -->
  <script src="https://libs.baidu.com/jquery/1.10.2/jquery.min.js"></script>
  <script src="/js/onBoot.js"></script>
  <!-- Spectre.css framework -->
  <link rel="stylesheet" href="/css/spectre-exp.min.css" />
  <link rel="stylesheet" href="/css/spectre-icons.min.css" />
  <link rel="stylesheet" href="/css/spectre.min.css" />
  <!-- <link rel="stylesheet" type="text/css" href="/css/custom.css" />
  <link rel="stylesheet" href="/css/custom_theme_dark.css" />
  <link rel="stylesheet" href="/css/phone.css" /> -->
  
  <!-- theme css & js -->
  
<link rel="stylesheet" href="/css/book.css">
 
<script src="/js/book.js"></script>

  
  <!-- tocbot -->
  <script src="/js/tocbot.min.js"></script>
  <link rel="stylesheet" href="/css/tocbot.css" />
  
  <!-- katex -->

  
<script src="/js/zooming.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function () {
    const zooming = new Zooming()
    zooming.listen('.book-content img')
})
</script>

  
<!-- Google Analytics -->

<!-- <script async src="https://www.googletagmanager.com/gtag/js?id=G-FEZS2B4N4L"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-FEZS2B4N4L');
</script> -->

<!-- End Google Analytics -->

<meta name="generator" content="Hexo 6.0.0"></head>


  <body>
    <div id="body-color" class="">
      <div class="back-color"></div>
      <div class="star-back"></div>
    </div>
    <div class="book-container">
      <div class="book-sidebar">
        <div class="book-brand">
  <a href="/">
    <!-- <img data-src="/favicon.png"> -->
    <div>
      <img
        id="head_img"
        src="../../images/other/g0rY8J.png"
      />
    </div>
    <span>路卡的自由庭院岛 4.0</span>
  </a>
</div>
 <div class="book-menu scrollbar">
  <ul>
<li><a href="/"><img data-src="../../images/other/fPOGP1.png" class="l_logo"> 广场</a></li>
<li><a href="/changelog"><img data-src="../../images/other/fiCMq0.png" class="l_logo"> 更新日志</a></li>
</ul>
<h1 id="img-data-src-images-other-fiCUMR-png-class-l-logo-笔记"><a href="/14567"><img data-src="../../images/other/fiCUMR.png" class="l_logo"> 笔记</a></h1>
<!-- ## 乐理笔记
* [__1__ 五线谱基础知识](/24257) -->
<h2 id="Javascript-CSS">Javascript/CSS</h2>
<ul>
<li><a href="/14022"><strong>38</strong> webpack打包项目时会打包已经import但没用到的模块吗</a></li>
<li><a href="/59364"><strong>37</strong> browserHistory和hashHistory的差别</a></li>
<li><a href="/29512"><strong>36</strong> 如何在js中使用class</a></li>
<li><a href="/10110"><strong>35</strong> Promise的全部用法</a></li>
<li><a href="/30293"><strong>34</strong> 数组内对象去重</a></li>
<li><a href="/17750"><strong>33</strong> VSCode 代码片段</a></li>
<li><a href="/40123"><strong>32</strong> hexo d遇到的问题记录</a></li>
<li><a href="/7354"><strong>31</strong> 不同端口的localhost的cookie是否共享</a></li>
<li><a href="/56565"><strong>30</strong> npm-i和npm-ci的区别</a></li>
<li><a href="/14022"><strong>29</strong> webpack打包项目时会打包已经import但没用到的模块吗</a></li>
<li><a href="/64820"><strong>28</strong> 如何判断当前环境是移动端还是PC端</a></li>
<li><a href="/58919"><strong>27</strong> 类数组对象和arguments</a></li>
<li><a href="/21790"><strong>26</strong> clipboard.js实现复制功能</a></li>
<li><a href="/15120"><strong>25</strong> 如何删除项目中没有用到的package</a></li>
<li><a href="/26344"><strong>24</strong> VSCode自定义代码片段</a></li>
<li><a href="/17809"><strong>23</strong> 伪类和伪元素的区别</a></li>
<li><a href="/20181"><strong>22</strong> axios完整接口调用顺序</a></li>
<li><a href="/60132"><strong>21</strong> 常用utils整合</a></li>
<li><a href="/9271"><strong>20</strong> 处理blob文件下载抛出json格式异常的问题</a></li>
<li><a href="/46572"><strong>19</strong> ES6新特性总结</a></li>
<li><a href="/29473"><strong>18</strong> 样式处理器选型</a></li>
<li><a href="/57469"><strong>17</strong> Html5文字设置渐变色</a></li>
<li><a href="/60642"><strong>16</strong> css文本超出隐藏显示省略号</a></li>
<li><a href="/6329"><strong>15</strong> Flex布局属性浅解</a></li>
<li><a href="/36608"><strong>14</strong> 浏览器兼容性问题整理</a></li>
<li><a href="/21732"><strong>13</strong> 原生js实现简易瀑布流</a></li>
<li><a href="/29471"><strong>12</strong> Base64转文件下载</a></li>
<li><a href="/41455"><strong>11</strong> js实现中文数组拼音排序</a></li>
<li><a href="/36370"><strong>10</strong> 如何将json数据转化为data.json并下载</a></li>
<li><a href="/53556"><strong>9</strong> 如何发现不安全的正则表达式</a></li>
<li><a href="/12665"><strong>8</strong> setTimeout和Promise执行顺序</a></li>
<li><a href="/1079"><strong>7</strong> js实现文本不可复制及复制监听</a></li>
<li><a href="/3951"><strong>6</strong> js函数判断是否为纯对象</a></li>
<li><a href="/65473"><strong>5</strong> base64和Blob转换</a></li>
<li><a href="/23627"><strong>4</strong> 使用viewport对页面做响应式处理</a></li>
<li><a href="/53717"><strong>3</strong> 解决网页加载后没有清除css和js缓存的问题</a></li>
<li><a href="/22406"><strong>2</strong> 个人的一种图片懒加载思路</a></li>
<li><a href="/16400"><strong>1</strong> 解决页面移动端点击延迟的问题</a></li>
</ul>
<h2 id="Vue-React">Vue/React</h2>
<ul>
<li><a href="/28864"><strong>4</strong> vue3Setup项目中如何阻止使用浏览器返回键</a></li>
<li><a href="/15023"><strong>3</strong> 图表插件选型</a></li>
<li><a href="/57808"><strong>2</strong> vue-class-component对TS的支持</a></li>
<li><a href="/57928"><strong>1</strong> Grid/treeview控件简要介绍</a></li>
</ul>
<h2 id="其它">其它</h2>
<ul>
<li><a href="/9999999999">[Tags]</a></li>
<li><a href="/31087"><strong>11</strong> VSCode前端开发自用插件推荐</a></li>
<li><a href="/4309"><strong>10</strong> 解决Chrome80版本SameSite属性导致Cookie无法跨域的问题</a></li>
<li><a href="/32529"><strong>9</strong> zsh和bash的切换</a></li>
<li><a href="/41922"><strong>8</strong> Mac常规安装nvm并下载指定版本node</a></li>
<li><a href="/52608"><strong>7</strong> Homebrew大陆安装脚本</a></li>
<li><a href="/39572"><strong>6</strong> 不同文件类型转base64后的前缀</a></li>
<li><a href="/48737"><strong>5</strong> node is not avalid Win32 application报错解决办法</a></li>
<li><a href="/35468"><strong>4</strong> 浏览器MixedContent报错</a></li>
<li><a href="/13573"><strong>3</strong> 修改Mac鼠标滚轮逻辑</a></li>
<li><a href="/39020"><strong>2</strong> windows关闭被占用的端口</a></li>
<li><a href="/58914"><strong>1</strong> 工作中遇到的关于DB2/mysql的一些问题及解决办法</a></li>
</ul>
<span id="more"></span>
<ul>
<li><a href="/23761"><img data-src="../../images/other/fPz6u6.png" class="l_logo"> 游戏档案馆</a></li>
<li><a href="/pokemon"><img data-src="../../images/other/fipf1A.png" class="l_logo"> 宝可梦后院</a></li>
</ul>
<h1 id="img-data-src-images-other-fi98gA-png-class-l-logo-杂物室"><a href=""><img data-src="../../images/other/fi98gA.png" class="l_logo"> 杂物室</a></h1>
<h2 id="杂谈">杂谈</h2>
<ul>
<li><a href="/5371">宝可梦BW～SM 杂志情报图</a></li>
<li><a href="/56511">不正确记忆</a></li>
<li><a href="/2285">「自留」庭院岛历史</a></li>
<li><a href="/27176">「自留」自己做的第一网站</a></li>
<li><a href="/58027">「自留」弃坑的新版个人网站</a></li>
<li><a href="/41678">「自留」Markdown Demo</a></li>
</ul>
<h2 id="工具">工具</h2>
<ul>
<li><a href="/60328">HTML常用转义字符</a></li>
<li><a href="/base64">Base64加解密</a></li>
<li><a href="/45597">配色参考</a></li>
<li><a href="/49833">营销号生成器</a></li>
</ul>
<h2 id="影像">影像</h2>
<ul>
<li><a href="/21283">日常随拍</a></li>
<li><a href="/17773">模玩摄影</a></li>
<li><a href="/10306">绘画</a></li>
<li><a href="/21563">自制训练家卡</a></li>
</ul>
<!--more-->

</div>


<script src="/js/book-menu.js"></script>

        <div class="book-sidebar-bottom">
          <div class="sidebar-title" onclick="changeSidebarSize()">
            <b>》</b>
            <span>主题切换</span>
          </div>
          <div class="theme-group">
            <!-- Sleep -->
            <div
              style="background-image: url('../../images/other/sleep_back.jpg');background-size: cover;"
              onclick="changeTheme('sleep')"
            >
              sleep
            </div>
            <!-- 宝可梦 -->
            <div
              style="background-image: url('../../images/other/fipf1A.png');background-size:auto;background-repeat: no-repeat;background-position: center;"
              onclick="changeTheme('pokemon')"
            >
              宝可梦
            </div>
            <!-- 幽灵诡计 -->
            <div
              style="background-image: url('../../images/other/ghosttrick_back.jpg');background-size: cover;"
              onclick="changeTheme('ghosttrick')"
            >
              西塞尔
            </div>
            <!-- dedsec -->
            <div
              style="background-image: url('../../images/other/dedsec.webp');background-size: cover;"
              onclick="changeTheme('dedsec')"
            >
              Dedsec
            </div>
            <!-- 朱紫 -->
            <div
              style="background-image: url('../../images/other/sv_back3.jpg');background-size: cover;"
              onclick="changeTheme('scarlet')"
            >
              Scarlet
            </div>
            <!-- 朱紫 -->
            <div
              style="background-image: url('../../images/other/sv_back4.jpg');background-size: cover;"
              onclick="changeTheme('violet')"
            >
              Violet
            </div>
            <!-- P5 -->
            <div
              style="background-image: url('../../images/other/p5_back.jpg');background-size: cover;"
              onclick="changeTheme('p5')"
            >
              P5
            </div>
            <!-- P3R -->
            <div
              style="background: linear-gradient(to bottom, #51A6F4, #0817B1)"
              onclick="changeTheme('p3r')"
            >
              满月
            </div>
            <!-- 黄昏 -->
            <div
              style="background: linear-gradient(to bottom, #071062, #7f4e0e)"
              onclick="changeTheme('dawn')"
            >
              黄昏
            </div>
            <!-- 深夜 -->
            <div
              style="background: linear-gradient(to bottom, #0b126f, #000000)"
              onclick="changeTheme('dark')"
            >
              深夜
            </div>
            <!-- 经典 -->
            <div
              style="background-color: #1c1c1e"
              onclick="changeTheme('classic')"
            >
              经典
            </div>
          </div>
        </div>
      </div>
      <!-- 提前加载图片资源 -->
      <img class="img-hide" src="../../images/other/p5_back.jpg" alt="">
      <img class="img-hide" src="../../images/other/sv_back3.jpg" alt="">
      <img class="img-hide" src="../../images/other/sv_back4.jpg" alt="">
      <img class="img-hide" src="../../images/other/ghosttrick_back.jpg" alt="">
      <img class="img-hide" src="../../images/other/pokemon_back.jpg" alt="">
      <img class="img-hide" src="../../images/other/sleep_back.jpg" alt="">
      <img class="img-hide" src="../../images/other/dedsec_back.jpg" alt="">
      <!-- <div class="backlogo" onClick="toOldSite()">FLASHBACK</div> -->

      <div
  class="sidebar-toggle"
  onclick="sidebar_toggle()"
  onmouseover="add_inner()"
  onmouseleave="remove_inner()"
>
  <div class="sidebar-toggle-inner"></div>
</div>

<script>
  function add_inner() {
    let inner = document.querySelector(".sidebar-toggle-inner");
    inner.classList.add("show");
  }

  function remove_inner() {
    let inner = document.querySelector(".sidebar-toggle-inner");
    inner.classList.remove("show");
  }

  function sidebar_toggle() {
    let sidebar_toggle = document.querySelector(".sidebar-toggle");
    let sidebar = document.querySelector(".book-sidebar");
    let content = document.querySelector(".off-canvas-content");
    let footerCom = document.querySelector(".footer-com");
    let backToTop = document.querySelector(".back-to-top");
    if (sidebar_toggle.classList.contains("extend")) {
      // show
      sidebar_toggle.classList.remove("extend");
      footerCom.style.left = "calc(14rem + 6px)";
      footerCom.style.width = "calc(84% - 13.65rem - 6px)";
      backToTop.style.left = " calc(84% - 5.35rem)";
      sidebar.classList.remove("hide");
      content.classList.remove("extend");
    } else {
      // hide
      footerCom.style.left = "4px";
      footerCom.style.width = "calc(84% - 1.65rem - 12px)";
      sidebar_toggle.classList.add("extend");
      backToTop.style.left = "calc(84% - 7.75rem)";
      sidebar.classList.add("hide");
      content.classList.add("extend");
    }
  }
</script>


      <div class="off-canvas-content">
        <div class="back-to-top" onclick="go_top()">回到顶部</div>
        <div class="footer-com">
          <div class="center">
            <div class="expand">
              <div class="marquee-wrap">
                <!-- --------------------------------------- -->
                <span onclick="jumpToPage('/3243')">
                  <i>「</i>
                  <b class="pink">初音未来：歌姬计划 Mega39's+\游戏档案馆</b>
                  <i>」<span>2023-06-07</span></i>
                </span>
                <!-- --------------------------------------- -->
                <span onclick="jumpToPage('/20928')">
                  <i>「</i>
                  <b class="blue">戴拿&盖亚奥特曼\皮套摄影
                  </b>
                  <i>」<span>2024-08-02</span></i>
                </span>
                <!-- --------------------------------------- -->
                <span onclick="jumpToPage('/10648')">
                  <i>「</i>
                  <b class="pink">宝可梦：白金\游戏档案馆</b>
                  <i>」<span>2023-08-06</span></i>
                </span>
                <!-- --------------------------------------- -->
                <span onclick="jumpToPage('/46604')">
                  <i>「</i>
                  <b class="blue">闪焰王牌/模玩摄影</b>
                  <i>」<span>2024-08-06</span></i>
                </span>
                <!-- --------------------------------------- -->
                <span onclick="jumpToPage('/30810')">
                  <i>「</i>
                  <b class="pink">多龙巴鲁托\模玩摄影</b>
                  <i>」<span>2023-06-05</span></i>
                </span>
                <!-- --------------------------------------- -->
                <span onclick="jumpToPage('/8657')">
                  <i>「</i>
                  <b class="green">泽塔奥特曼\皮套摄影</b>
                  <i>」<span>2023-06-07</span></i>
                </span>
                <!-- --------------------------------------- -->
                <span onclick="jumpToPage('/54991')">
                  <i>「</i>
                  <b class="pink">阿尔宙斯\模玩摄影</b>
                  <i>」<span>2023-06-07</span></i>
                </span>
                <!-- --------------------------------------- -->
                <!-- <span onclick="jumpToPage('/60132')">
                  <i>「</i>
                  <b class="pink">xxxxxxxx</b>
                  <i>」<span>2023-06-07</span></i>
                </span> -->
                <!-- --------------------------------------- -->
                <!-- <span onclick="jumpToPage('/60132')">
                  <i>「</i>
                  <b class="pink">xxxxxxxx</b>
                  <i>」<span>2023-06-07</span></i>
                </span> -->
                <!-- --------------------------------------- -->
                <!-- <span onclick="jumpToPage('/60132')">
                  <i>「</i>
                  <b class="pink">xxxxxxxx</b>
                  <i>」<span>2023-06-07</span></i>
                </span> -->
                <!-- --------------------------------------- -->
              </div>
            </div>
          </div>
        </div>
        <div class="columns">
          <div class="column col-10 col-lg-12">
            <div class="book-navbar"><!-- For Responsive Layout -->

<header class="navbar">
  <section class="navbar-section">
    <a onclick="open_sidebar()">
      <i class="icon icon-menu"></i>
    </a>
  </section>
</header>
</div>
            <div class="book-content"><div class="book-post">
  <h1 id="swig￼1-font-color-gray-145-font">常用utils整合 <font color="gray">#145</font></h1>
<p><strong>Anuluca</strong>     <strong>Date :</strong> 2023-05-29   <strong>Tags :</strong> 2</p>
<div class = "articlehead" style="background-image:url('../../images/Games/lego_starwars/1.jpg')"></div>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 正则校验</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 正则库</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> regularList = &#123;</span><br><span class="line">  <span class="attr">iphone</span>: &#123;</span><br><span class="line">    <span class="attr">rule</span>: <span class="regexp">/^1[3456789]\d&#123;9&#125;$/</span>,</span><br><span class="line">    <span class="attr">msg</span>: <span class="string">&quot;请正确输入您的手机号&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">password</span>: &#123;</span><br><span class="line">    <span class="attr">rule</span>: <span class="regexp">/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]&#123;6,16&#125;$/</span>,</span><br><span class="line">    <span class="attr">msg</span>: <span class="string">&quot;6-16位字符的密码（数字和字母组成）&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">idCard</span>: &#123;</span><br><span class="line">    <span class="attr">rule</span>: <span class="regexp">/^[1-9]\d&#123;5&#125;[1-9]\d&#123;3&#125;((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d&#123;3&#125;([0-9]|X|x)$/</span>,</span><br><span class="line">    <span class="attr">msg</span>: <span class="string">&quot;请正确输入您的身份证号码&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">email</span>: &#123;</span><br><span class="line">    <span class="attr">rule</span>: <span class="regexp">/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]+.)&#123;1,63&#125;[a-z0-9]+$/</span>,</span><br><span class="line">    <span class="attr">msg</span>: <span class="string">&quot;请正确输入您的邮箱地址&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plateNumber</span>: &#123;</span><br><span class="line">    <span class="attr">rule</span>: <span class="regexp">/^[京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领A-Z]&#123;1&#125;[A-Z]&#123;1&#125;[A-Z0-9]&#123;4&#125;[A-Z0-9挂学警港澳]&#123;1&#125;$/</span>,</span><br><span class="line">    <span class="attr">msg</span>: <span class="string">&quot;请正确输入您的车牌号&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">chinese</span>: &#123;</span><br><span class="line">    <span class="attr">rule</span>: <span class="regexp">/^[\u4e00-\u9fa5]+$/</span>,</span><br><span class="line">    <span class="attr">msg</span>: <span class="string">&quot;请正确输入中文&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">enCode</span>: &#123;</span><br><span class="line">    <span class="comment">// 编码校验</span></span><br><span class="line">    <span class="attr">rule</span>: <span class="regexp">/^[a-zA-Z0-9]((([a-zA-Z0-9])*[a-zA-Z0-9]?)|(([a-zA-Z0-9]+|\.)*[a-zA-Z0-9]))$/</span>,</span><br><span class="line">    <span class="attr">msg</span>: <span class="string">&quot;编码只能输入英文、数字和小数点且小数点不能放在首尾&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">userAccount</span>: &#123;</span><br><span class="line">    <span class="comment">// 岗位编码</span></span><br><span class="line">    <span class="attr">rule</span>: <span class="regexp">/^[A-Za-z0-9]+$/</span>,</span><br><span class="line">    <span class="attr">msg</span>: <span class="string">&quot;只能输入数字英文&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">fullName</span>: &#123;</span><br><span class="line">    <span class="comment">// 名称</span></span><br><span class="line">    <span class="attr">rule</span>: <span class="regexp">/^([\u4e00-\u9fa5]|[a-zA-Z0-9])+$/</span>,</span><br><span class="line">    <span class="attr">msg</span>: <span class="string">&quot;名称不能含有特殊符号&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">userCode</span>: &#123;</span><br><span class="line">    <span class="comment">// 数字编码</span></span><br><span class="line">    <span class="attr">rule</span>: <span class="regexp">/^([0-9]+)$/</span>,</span><br><span class="line">    <span class="attr">msg</span>: <span class="string">&quot;编码只能输入数字&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">allDate</span>: &#123;</span><br><span class="line">    <span class="comment">//判断请假时间和小时是否为0.5的倍数</span></span><br><span class="line">    <span class="attr">rule</span>: <span class="regexp">/^[1-9]\d*\.[5]$|0\.[5]$|\.[0]$|^[1-9]\d*$/</span>,</span><br><span class="line">    <span class="attr">msg</span>: <span class="string">&quot;时间只能是整数和0.5的倍数&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">bigInt</span>: &#123;</span><br><span class="line">    <span class="comment">// 正整数（不含0）</span></span><br><span class="line">    <span class="attr">rule</span>: <span class="regexp">/^[1-9]*[1-9][0-9]*$/</span>,</span><br><span class="line">    <span class="attr">msg</span>: <span class="string">&quot;请输入正整数&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">filed</span>: &#123;</span><br><span class="line">    <span class="comment">// 大小写英文字母、数字、下划线组合，且不能数字、下划线开头</span></span><br><span class="line">    <span class="attr">rule</span>: <span class="regexp">/^[a-zA-Z]([a-zA-Z0-9_])*$/</span>,</span><br><span class="line">    <span class="attr">msg</span>: <span class="string">&quot;只能输入大小写英文字母、数字、下划线组合，且不能数字、下划线开头&quot;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">formValidate</span> = (<span class="params">type, msg</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function">(<span class="params">rule, value, callback</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> reg =</span><br><span class="line">      regularList[type] &amp;&amp; regularList[type].<span class="property">rule</span></span><br><span class="line">        ? regularList[type].<span class="property">rule</span></span><br><span class="line">        : type;</span><br><span class="line">    msg = msg</span><br><span class="line">      ? msg</span><br><span class="line">      : regularList[type] &amp;&amp; regularList[type].<span class="property">msg</span></span><br><span class="line">      ? regularList[type].<span class="property">msg</span></span><br><span class="line">      : <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span> (!reg.<span class="title function_">test</span>(value)) &#123;</span><br><span class="line">      <span class="title function_">callback</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(msg));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="title function_">callback</span>();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 时间格式转换</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Parse the time to string</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">(Object|string|number)</span>&#125; <span class="variable">time</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">cFormat</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">string | null</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">parseTime</span>(<span class="params">time, cFormat</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">arguments</span>.<span class="property">length</span> === <span class="number">0</span> || !time) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> format = cFormat || <span class="string">&quot;&#123;y&#125;-&#123;m&#125;-&#123;d&#125; &#123;h&#125;:&#123;i&#125;:&#123;s&#125;&quot;</span>;</span><br><span class="line">  <span class="keyword">let</span> date;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> time === <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="regexp">/^[0-9]+$/</span>.<span class="title function_">test</span>(time)) &#123;</span><br><span class="line">      <span class="comment">// support &quot;1548221490638&quot;</span></span><br><span class="line">      time = <span class="built_in">parseInt</span>(time);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// support safari</span></span><br><span class="line">      <span class="comment">// https://stackoverflow.com/questions/4310953/invalid-date-in-safari</span></span><br><span class="line">      time = time.<span class="title function_">replace</span>(<span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="regexp">/-/gm</span>), <span class="string">&quot;/&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> time === <span class="string">&quot;string&quot;</span> &amp;&amp; <span class="regexp">/^[0-9]+$/</span>.<span class="title function_">test</span>(time)) &#123;</span><br><span class="line">      time = <span class="built_in">parseInt</span>(time);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> time === <span class="string">&quot;number&quot;</span> &amp;&amp; time.<span class="title function_">toString</span>().<span class="property">length</span> === <span class="number">10</span>) &#123;</span><br><span class="line">      time = time * <span class="number">1000</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    date = <span class="keyword">new</span> <span class="title class_">Date</span>(time);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> formatObj = &#123;</span><br><span class="line">    <span class="attr">y</span>: date.<span class="title function_">getFullYear</span>(),</span><br><span class="line">    <span class="attr">m</span>: date.<span class="title function_">getMonth</span>() + <span class="number">1</span>,</span><br><span class="line">    <span class="attr">d</span>: date.<span class="title function_">getDate</span>(),</span><br><span class="line">    <span class="attr">h</span>: date.<span class="title function_">getHours</span>(),</span><br><span class="line">    <span class="attr">i</span>: date.<span class="title function_">getMinutes</span>(),</span><br><span class="line">    <span class="attr">s</span>: date.<span class="title function_">getSeconds</span>(),</span><br><span class="line">    <span class="attr">a</span>: date.<span class="title function_">getDay</span>(),</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">const</span> time_str = format.<span class="title function_">replace</span>(<span class="regexp">/&#123;([ymdhisa])+&#125;/g</span>, <span class="function">(<span class="params">result, key</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> value = formatObj[key];</span><br><span class="line">    <span class="comment">// Note: getDay() returns 0 on Sunday</span></span><br><span class="line">    <span class="keyword">if</span> (key === <span class="string">&quot;a&quot;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> [<span class="string">&quot;日&quot;</span>, <span class="string">&quot;一&quot;</span>, <span class="string">&quot;二&quot;</span>, <span class="string">&quot;三&quot;</span>, <span class="string">&quot;四&quot;</span>, <span class="string">&quot;五&quot;</span>, <span class="string">&quot;六&quot;</span>][value];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> value.<span class="title function_">toString</span>().<span class="title function_">padStart</span>(<span class="number">2</span>, <span class="string">&quot;0&quot;</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> time_str;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 更适合用户理解的时间格式转换</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">time</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">option</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">string</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">formatTime</span>(<span class="params">time, option</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> ((<span class="string">&quot;&quot;</span> + time).<span class="property">length</span> === <span class="number">10</span>) &#123;</span><br><span class="line">    time = <span class="built_in">parseInt</span>(time) * <span class="number">1000</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    time = +time;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> d = <span class="keyword">new</span> <span class="title class_">Date</span>(time);</span><br><span class="line">  <span class="keyword">const</span> now = <span class="title class_">Date</span>.<span class="title function_">now</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> diff = (now - d) / <span class="number">1000</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (diff &lt; <span class="number">30</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;刚刚&quot;</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (diff &lt; <span class="number">3600</span>) &#123;</span><br><span class="line">    <span class="comment">// less 1 hour</span></span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">ceil</span>(diff / <span class="number">60</span>) + <span class="string">&quot;分钟前&quot;</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (diff &lt; <span class="number">3600</span> * <span class="number">24</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">ceil</span>(diff / <span class="number">3600</span>) + <span class="string">&quot;小时前&quot;</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (diff &lt; <span class="number">3600</span> * <span class="number">24</span> * <span class="number">2</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;1天前&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (option) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">parseTime</span>(time, option);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      d.<span class="title function_">getMonth</span>() +</span><br><span class="line">      <span class="number">1</span> +</span><br><span class="line">      <span class="string">&quot;月&quot;</span> +</span><br><span class="line">      d.<span class="title function_">getDate</span>() +</span><br><span class="line">      <span class="string">&quot;日&quot;</span> +</span><br><span class="line">      d.<span class="title function_">getHours</span>() +</span><br><span class="line">      <span class="string">&quot;时&quot;</span> +</span><br><span class="line">      d.<span class="title function_">getMinutes</span>() +</span><br><span class="line">      <span class="string">&quot;分&quot;</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取url请求参数</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">url</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">Object</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getQueryObject</span>(<span class="params">url</span>) &#123;</span><br><span class="line">  url = url == <span class="literal">null</span> ? <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span> : url;</span><br><span class="line">  <span class="keyword">const</span> search = url.<span class="title function_">substring</span>(url.<span class="title function_">lastIndexOf</span>(<span class="string">&quot;?&quot;</span>) + <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">const</span> obj = &#123;&#125;;</span><br><span class="line">  <span class="keyword">const</span> reg = <span class="regexp">/([^?&amp;=]+)=([^?&amp;=]*)/g</span>;</span><br><span class="line">  search.<span class="title function_">replace</span>(reg, <span class="function">(<span class="params">rs, $<span class="number">1</span>, $<span class="number">2</span></span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> name = <span class="built_in">decodeURIComponent</span>($<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">let</span> val = <span class="built_in">decodeURIComponent</span>($<span class="number">2</span>);</span><br><span class="line">    val = <span class="title class_">String</span>(val);</span><br><span class="line">    obj[name] = val;</span><br><span class="line">    <span class="keyword">return</span> rs;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取字符串长度</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; input value</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">number</span>&#125; output value</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">byteLength</span>(<span class="params">str</span>) &#123;</span><br><span class="line">  <span class="comment">// returns the byte length of an utf8 string</span></span><br><span class="line">  <span class="keyword">let</span> s = str.<span class="property">length</span>;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = str.<span class="property">length</span> - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">    <span class="keyword">const</span> code = str.<span class="title function_">charCodeAt</span>(i);</span><br><span class="line">    <span class="keyword">if</span> (code &gt; <span class="number">0x7f</span> &amp;&amp; code &lt;= <span class="number">0x7ff</span>) s++;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (code &gt; <span class="number">0x7ff</span> &amp;&amp; code &lt;= <span class="number">0xffff</span>) s += <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">if</span> (code &gt;= <span class="number">0xdc00</span> &amp;&amp; code &lt;= <span class="number">0xdfff</span>) i--;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对象转uri编码</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Object</span>&#125; <span class="variable">json</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">Array</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">param</span>(<span class="params">json</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!json) <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">cleanArray</span>(</span><br><span class="line">    <span class="title class_">Object</span>.<span class="title function_">keys</span>(json).<span class="title function_">map</span>(<span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (json[key] === <span class="literal">undefined</span>) <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">encodeURIComponent</span>(key) + <span class="string">&quot;=&quot;</span> + <span class="built_in">encodeURIComponent</span>(json[key]);</span><br><span class="line">    &#125;)</span><br><span class="line">  ).<span class="title function_">join</span>(<span class="string">&quot;&amp;&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">url</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">Object</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">param2Obj</span>(<span class="params">url</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> search = <span class="built_in">decodeURIComponent</span>(url.<span class="title function_">split</span>(<span class="string">&quot;?&quot;</span>)[<span class="number">1</span>]).<span class="title function_">replace</span>(<span class="regexp">/\+/g</span>, <span class="string">&quot; &quot;</span>);</span><br><span class="line">  <span class="keyword">if</span> (!search) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;&#125;;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> obj = &#123;&#125;;</span><br><span class="line">  <span class="keyword">const</span> searchArr = search.<span class="title function_">split</span>(<span class="string">&quot;&amp;&quot;</span>);</span><br><span class="line">  searchArr.<span class="title function_">forEach</span>(<span class="function">(<span class="params">v</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> index = v.<span class="title function_">indexOf</span>(<span class="string">&quot;=&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (index !== -<span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> name = v.<span class="title function_">substring</span>(<span class="number">0</span>, index);</span><br><span class="line">      <span class="keyword">const</span> val = v.<span class="title function_">substring</span>(index + <span class="number">1</span>, v.<span class="property">length</span>);</span><br><span class="line">      obj[name] = val;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 移除指定元素类名</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">HTMLElement</span>&#125; <span class="variable">element</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">className</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">toggleClass</span>(<span class="params">element, className</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!element || !className) &#123;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> classString = element.<span class="property">className</span>;</span><br><span class="line">  <span class="keyword">const</span> nameIndex = classString.<span class="title function_">indexOf</span>(className);</span><br><span class="line">  <span class="keyword">if</span> (nameIndex === -<span class="number">1</span>) &#123;</span><br><span class="line">    classString += <span class="string">&quot;&quot;</span> + className;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    classString =</span><br><span class="line">      classString.<span class="title function_">substr</span>(<span class="number">0</span>, nameIndex) +</span><br><span class="line">      classString.<span class="title function_">substr</span>(nameIndex + className.<span class="property">length</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  element.<span class="property">className</span> = classString;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取时间戳</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">type</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">Date</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">getTime</span>(<span class="params">type</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (type === <span class="string">&quot;start&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>() - <span class="number">3600</span> * <span class="number">1000</span> * <span class="number">24</span> * <span class="number">90</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Date</span>(<span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">toDateString</span>());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 防抖</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Function</span>&#125; <span class="variable">func</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">wait</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">boolean</span>&#125; <span class="variable">immediate</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> &#123;<span class="type">*</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">debounce</span>(<span class="params">func, wait, immediate</span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> timeout, args, context, timestamp, result;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> later = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// 据上一次触发时间间隔</span></span><br><span class="line">    <span class="keyword">const</span> last = +<span class="keyword">new</span> <span class="title class_">Date</span>() - timestamp;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 上次被包装函数被调用时间间隔 last 小于设定时间间隔 wait</span></span><br><span class="line">    <span class="keyword">if</span> (last &lt; wait &amp;&amp; last &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      timeout = <span class="built_in">setTimeout</span>(later, wait - last);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      timeout = <span class="literal">null</span>;</span><br><span class="line">      <span class="comment">// 如果设定为immediate===true，因为开始边界已经调用过了此处无需调用</span></span><br><span class="line">      <span class="keyword">if</span> (!immediate) &#123;</span><br><span class="line">        result = func.<span class="title function_">apply</span>(context, args);</span><br><span class="line">        <span class="keyword">if</span> (!timeout) context = args = <span class="literal">null</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">function</span> (<span class="params">...args</span>) &#123;</span><br><span class="line">    context = <span class="variable language_">this</span>;</span><br><span class="line">    timestamp = +<span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">    <span class="keyword">const</span> callNow = immediate &amp;&amp; !timeout;</span><br><span class="line">    <span class="comment">// 如果延时不存在，重新设定延时</span></span><br><span class="line">    <span class="keyword">if</span> (!timeout) timeout = <span class="built_in">setTimeout</span>(later, wait);</span><br><span class="line">    <span class="keyword">if</span> (callNow) &#123;</span><br><span class="line">      result = func.<span class="title function_">apply</span>(context, args);</span><br><span class="line">      context = args = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 生成随机字符串</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">string</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">createUniqueString</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> timestamp = +<span class="keyword">new</span> <span class="title class_">Date</span>() + <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="keyword">const</span> randomNum = <span class="built_in">parseInt</span>((<span class="number">1</span> + <span class="title class_">Math</span>.<span class="title function_">random</span>()) * <span class="number">65536</span>) + <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="keyword">return</span> (+(randomNum + timestamp)).<span class="title function_">toString</span>(<span class="number">32</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 指定元素是否存在指定类名</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Check if an element has a class</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">HTMLElement</span>&#125; <span class="variable">elm</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">cls</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">boolean</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">hasClass</span>(<span class="params">ele, cls</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> !!ele.<span class="property">className</span>.<span class="title function_">match</span>(<span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&quot;(\\s|^)&quot;</span> + cls + <span class="string">&quot;(\\s|$)&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 为指定元素添加类名</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Add class to element</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">HTMLElement</span>&#125; <span class="variable">elm</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">cls</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">addClass</span>(<span class="params">ele, cls</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!<span class="title function_">hasClass</span>(ele, cls)) ele.<span class="property">className</span> += <span class="string">&quot; &quot;</span> + cls;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 移除指定元素类名</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Remove class from element</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">HTMLElement</span>&#125; <span class="variable">elm</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">cls</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">removeClass</span>(<span class="params">ele, cls</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="title function_">hasClass</span>(ele, cls)) &#123;</span><br><span class="line">    <span class="keyword">const</span> reg = <span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="string">&quot;(\\s|^)&quot;</span> + cls + <span class="string">&quot;(\\s|$)&quot;</span>);</span><br><span class="line">    ele.<span class="property">className</span> = ele.<span class="property">className</span>.<span class="title function_">replace</span>(reg, <span class="string">&quot; &quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 文件大小展示</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">toFileSize</span>(<span class="params">size</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (size == <span class="literal">null</span> || size == <span class="string">&quot;&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (size &lt; <span class="number">1024.0</span>) <span class="keyword">return</span> jnpf.<span class="title function_">toDecimal</span>(size) + <span class="string">&quot; 字节&quot;</span>;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (size &gt;= <span class="number">1024.0</span> &amp;&amp; size &lt; <span class="number">1048576</span>)</span><br><span class="line">    <span class="keyword">return</span> jnpf.<span class="title function_">toDecimal</span>(size / <span class="number">1024.0</span>) + <span class="string">&quot; KB&quot;</span>;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (size &gt;= <span class="number">1048576</span> &amp;&amp; size &lt; <span class="number">1073741824</span>)</span><br><span class="line">    <span class="keyword">return</span> jnpf.<span class="title function_">toDecimal</span>(size / <span class="number">1024.0</span> / <span class="number">1024.0</span>) + <span class="string">&quot; MB&quot;</span>;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (size &gt;= <span class="number">1073741824</span>)</span><br><span class="line">    <span class="keyword">return</span> jnpf.<span class="title function_">toDecimal</span>(size / <span class="number">1024.0</span> / <span class="number">1024.0</span> / <span class="number">1024.0</span>) + <span class="string">&quot; GB&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// url文件下载</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">downloadFile</span>(<span class="params">url, name</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (!url) <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">const</span> baseUrl = url.<span class="title function_">indexOf</span>(<span class="string">&quot;http&quot;</span>) &gt; -<span class="number">1</span> ? <span class="string">&quot;&quot;</span> : define.<span class="property">comUrl</span>;</span><br><span class="line">  <span class="keyword">const</span> a = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">  a.<span class="title function_">setAttribute</span>(<span class="string">&quot;download&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">  <span class="keyword">const</span> realUrl = baseUrl + url + (name ? <span class="string">&quot;&amp;name=&quot;</span> + name : <span class="string">&quot;&quot;</span>);</span><br><span class="line">  a.<span class="title function_">setAttribute</span>(<span class="string">&quot;href&quot;</span>, realUrl);</span><br><span class="line">  a.<span class="title function_">click</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串是否为空</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">isEmpty</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> data === <span class="literal">null</span> || data === <span class="literal">undefined</span> || data === <span class="string">&quot;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组是否为空</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">isEmptyArray</span>(<span class="params">data</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Array</span>.<span class="title function_">isArray</span>(data) ? data.<span class="property">length</span> === <span class="number">0</span> : <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 最大公约数计算</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">gcd</span> = (<span class="params">x, y</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> x % y === <span class="number">0</span> ? y : <span class="title function_">gcd</span>(y, x % y);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取当前月份</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">getMonth</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">let</span> date = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">  <span class="keyword">let</span> year = date.<span class="title function_">getFullYear</span>();</span><br><span class="line">  <span class="keyword">let</span> month =</span><br><span class="line">    date.<span class="title function_">getMonth</span>() + <span class="number">1</span> &lt; <span class="number">10</span></span><br><span class="line">      ? <span class="string">&quot;0&quot;</span> + (date.<span class="title function_">getMonth</span>() + <span class="number">1</span>)</span><br><span class="line">      : date.<span class="title function_">getMonth</span>() + <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;&quot;</span> + year + month;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 弹窗形式打开页面</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Sting</span>&#125; <span class="variable">url</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Sting</span>&#125; <span class="variable">title</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Number</span>&#125; <span class="variable">w</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Number</span>&#125; <span class="variable">h</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">openWindow</span>(<span class="params">url, title, w, h</span>) &#123;</span><br><span class="line">  <span class="comment">// Fixes dual-screen position                            Most browsers       Firefox</span></span><br><span class="line">  <span class="keyword">const</span> dualScreenLeft =</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">screenLeft</span> !== <span class="literal">undefined</span> ? <span class="variable language_">window</span>.<span class="property">screenLeft</span> : screen.<span class="property">left</span>;</span><br><span class="line">  <span class="keyword">const</span> dualScreenTop =</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">screenTop</span> !== <span class="literal">undefined</span> ? <span class="variable language_">window</span>.<span class="property">screenTop</span> : screen.<span class="property">top</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> width = <span class="variable language_">window</span>.<span class="property">innerWidth</span></span><br><span class="line">    ? <span class="variable language_">window</span>.<span class="property">innerWidth</span></span><br><span class="line">    : <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientWidth</span></span><br><span class="line">    ? <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientWidth</span></span><br><span class="line">    : screen.<span class="property">width</span>;</span><br><span class="line">  <span class="keyword">const</span> height = <span class="variable language_">window</span>.<span class="property">innerHeight</span></span><br><span class="line">    ? <span class="variable language_">window</span>.<span class="property">innerHeight</span></span><br><span class="line">    : <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientHeight</span></span><br><span class="line">    ? <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">clientHeight</span></span><br><span class="line">    : screen.<span class="property">height</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> left = width / <span class="number">2</span> - w / <span class="number">2</span> + dualScreenLeft;</span><br><span class="line">  <span class="keyword">const</span> top = height / <span class="number">2</span> - h / <span class="number">2</span> + dualScreenTop;</span><br><span class="line">  <span class="keyword">const</span> newWindow = <span class="variable language_">window</span>.<span class="title function_">open</span>(</span><br><span class="line">    url,</span><br><span class="line">    title,</span><br><span class="line">    <span class="string">&quot;toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=yes, copyhistory=no, width=&quot;</span> +</span><br><span class="line">      w +</span><br><span class="line">      <span class="string">&quot;, height=&quot;</span> +</span><br><span class="line">      h +</span><br><span class="line">      <span class="string">&quot;, top=&quot;</span> +</span><br><span class="line">      top +</span><br><span class="line">      <span class="string">&quot;, left=&quot;</span> +</span><br><span class="line">      left</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Puts focus on the newWindow</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">focus</span>) &#123;</span><br><span class="line">    newWindow.<span class="title function_">focus</span>();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 自动滚动至</span></span><br><span class="line"><span class="title class_">Math</span>.<span class="property">easeInOutQuad</span> = <span class="keyword">function</span> (<span class="params">t, b, c, d</span>) &#123;</span><br><span class="line">  t /= d / <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">if</span> (t &lt; <span class="number">1</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (c / <span class="number">2</span>) * t * t + b;</span><br><span class="line">  &#125;</span><br><span class="line">  t--;</span><br><span class="line">  <span class="keyword">return</span> (-c / <span class="number">2</span>) * (t * (t - <span class="number">2</span>) - <span class="number">1</span>) + b;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// requestAnimationFrame for Smart Animating http://goo.gl/sx5sts</span></span><br><span class="line"><span class="keyword">var</span> requestAnimFrame = (<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">requestAnimationFrame</span> ||</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">webkitRequestAnimationFrame</span> ||</span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">mozRequestAnimationFrame</span> ||</span><br><span class="line">    <span class="keyword">function</span> (<span class="params">callback</span>) &#123;</span><br><span class="line">      <span class="variable language_">window</span>.<span class="built_in">setTimeout</span>(callback, <span class="number">1000</span> / <span class="number">60</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br><span class="line">&#125;)();</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Because it&#x27;s so fucking difficult to detect the scrolling element, just move them all</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">amount</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">move</span>(<span class="params">amount</span>) &#123;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollTop</span> = amount;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">parentNode</span>.<span class="property">scrollTop</span> = amount;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollTop</span> = amount;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">function</span> <span class="title function_">position</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="property">scrollTop</span> ||</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">parentNode</span>.<span class="property">scrollTop</span> ||</span><br><span class="line">    <span class="variable language_">document</span>.<span class="property">body</span>.<span class="property">scrollTop</span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">to</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">duration</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">Function</span>&#125; <span class="variable">callback</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">scrollTo</span>(<span class="params">to, duration, callback</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> start = <span class="title function_">position</span>();</span><br><span class="line">  <span class="keyword">const</span> change = to - start;</span><br><span class="line">  <span class="keyword">const</span> increment = <span class="number">20</span>;</span><br><span class="line">  <span class="keyword">let</span> currentTime = <span class="number">0</span>;</span><br><span class="line">  duration = <span class="keyword">typeof</span> duration === <span class="string">&quot;undefined&quot;</span> ? <span class="number">500</span> : duration;</span><br><span class="line">  <span class="keyword">var</span> animateScroll = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="comment">// increment the time</span></span><br><span class="line">    currentTime += increment;</span><br><span class="line">    <span class="comment">// find the value with the quadratic in-out easing function</span></span><br><span class="line">    <span class="keyword">var</span> val = <span class="title class_">Math</span>.<span class="title function_">easeInOutQuad</span>(currentTime, start, change, duration);</span><br><span class="line">    <span class="comment">// move the document.body</span></span><br><span class="line">    <span class="title function_">move</span>(val);</span><br><span class="line">    <span class="comment">// do the animation unless its over</span></span><br><span class="line">    <span class="keyword">if</span> (currentTime &lt; duration) &#123;</span><br><span class="line">      <span class="title function_">requestAnimFrame</span>(animateScroll);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (callback &amp;&amp; <span class="keyword">typeof</span> callback === <span class="string">&quot;function&quot;</span>) &#123;</span><br><span class="line">        <span class="comment">// the animation is done so lets callback</span></span><br><span class="line">        <span class="title function_">callback</span>();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="title function_">animateScroll</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 校验是否为外部链接</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">path</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">Boolean</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">isExternal</span>(<span class="params">path</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="regexp">/^(https?:|mailto:|tel:)/</span>.<span class="title function_">test</span>(path);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 校验是否为url</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">url</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">Boolean</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">validURL</span>(<span class="params">url</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> reg =</span><br><span class="line">    <span class="regexp">/^(https?|ftp):\/\/([a-zA-Z0-9.-]+(:[a-zA-Z0-9.&amp;%$-]+)*@)*((25[0-5]|2[0-4][0-9]|1[0-9]&#123;2&#125;|[1-9][0-9]?)(\.(25[0-5]|2[0-4][0-9]|1[0-9]&#123;2&#125;|[1-9]?[0-9]))&#123;3&#125;|([a-zA-Z0-9-]+\.)*[a-zA-Z0-9-]+\.(com|edu|gov|int|mil|net|org|biz|arpa|info|name|pro|aero|coop|museum|[a-zA-Z]&#123;2&#125;))(:[0-9]+)*(\/($|[a-zA-Z0-9.,?&#x27;\\+&amp;%$#=~_-]+))*$/</span>;</span><br><span class="line">  <span class="keyword">return</span> reg.<span class="title function_">test</span>(url);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 校验是否全都是小写</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">str</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">Boolean</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">validLowerCase</span>(<span class="params">str</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> reg = <span class="regexp">/^[a-z]+$/</span>;</span><br><span class="line">  <span class="keyword">return</span> reg.<span class="title function_">test</span>(str);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 校验是否全都是大写</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; <span class="variable">str</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">Boolean</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">function</span> <span class="title function_">validUpperCase</span>(<span class="params">str</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> reg = <span class="regexp">/^[A-Z]+$/</span>;</span><br><span class="line">  <span class="keyword">return</span> reg.<span class="title function_">test</span>(str);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
  <a onclick="go_top()"
    ><div class="to_top"><div class="to-top-triangle"></div></div
  ></a>
</div>

<div class="drink-time">
  <img
    style="text-align: center; margin-top: 20vh; width: 150px; opacity: 0.9"
    src="../../images/other/2F65x1.png"
  />
  <div style="text-align: center; margin-top: 20px; font-size: 20px">
    由于某些原因，博客图床于5月26日惨遭爆破，目前正在整理需要的图片并迁移存活的图片到新图床,预计6月10日重新上线网站
  </div>
</div>


<div class="articleBottom">
  <i></i>
  <b
    >&nbsp;&nbsp;<img
      src="../../images/other/goDrXd.gif"
    />&nbsp;
    <div><span>THE END</span></div>
    &nbsp;<img
      src="../../images/other/god8aT.gif"
    />&nbsp;&nbsp;</b
  >
  <i></i>
</div>
<div class="combtn">
  <div class="valine_btn"><b>讨论</b></div>
  <div class="moving"></div>
</div>
<div>&nbsp;</div>

<div class="book-comments">
<!--    <link rel="stylesheet" href="https://unpkg.com/valine/dist/Valine.min.js">-->
<!-- <script src="//unpkg.zhimg.com/valine/dist/Valine.min.js"></script> -->
<div id="vcomments" style="margin-top: 100px"></div>
<script src="../../js/valine.js"></script>

<script>
  new Valine({
    el: "#vcomments",
    appId: "rqHuR8lh2h3Fp2s9v2M8nDYJ-gzGzoHsz",
    appKey: "9o4oYzzaYVFGG34Vd8ipLztu",
    notify: false,
    verify: false,
    avatar: "mm",
    placeholder: "说点什么",
    visitor: true,
  });
</script>

</div>
<a
  class="aaaaa"
  style="
    font-size: 10px;
    color: #999ca8;
    width: 55%;
    text-align: center;
    padding-top: 100px;
  "
>
  © 2018 - 2024 Anuluca
</a>
<span class="frsi">
  ▌友情链接
  <a
    href="https://cutekibry.github.io/"
    target="_blank"
    class="friendUrl"
    style="margin-left: 5px"
    >Tsuki's blog</a
  >&nbsp;|
  <a href="http://pokeamice.com/" target="_blank" class="friendUrl"
    >Poke amice</a
  >&nbsp;|
  <a href="https://austinxt.com/" target="_blank" class="friendUrl">夜航星</a>
</span>

 
<script src="/js/book-post.js"></script>

</div>
          </div>
          <div class="column col-2 hide-lg">
            <div class="book-post-info">
  
    <div class="book-post-meta">

  <div class="author">

    <!-- Author image -->
    <div class="author-img">
      
        <figure class="avatar avatar-lg">
          <img data-src="/me.jpg" alt="...">
        </figure>
      
    </div>

    <!-- Author title -->
    <div class="author-title">
      <div>Anuluca</div>
      <div style="font-family: 等线">Update:2023-05-29</div>
    </div>
  </div>

  
    <div class="divider"></div>

    <div class="link">
      

      <a class="tag-none-link" href="/tags/JS/" rel="tag">JS</a> <a class="tag-none-link" href="/tags/web%E5%89%8D%E7%AB%AF/" rel="tag">web前端</a>
    </div>
    
  

  <div class="divider"></div>
</div>
  

  <div class="book-tocbot"></div>

<div class="bottom">
  <div id="clock-button"></div>
  <div class="intro">
    <div id="intro_text">...</div>
  </div>
  <div class="links">
    <a target="_blank" rel="noopener" href="https://twitter.com/TILucario" class="link_l">
      <div
        style="
          background-image: url('../../images/other/dabyWQ.png');
        "
      ></div>
      <span>推特 ( 𝕏 ) </span></a
    >
    <a target="_blank" rel="noopener" href="https://space.bilibili.com/128735968" class="link_l">
      <div
        style="
          background-image: url('../../images/other/dabprFS.png');
        "
      ></div>
      <span>Bilibili</span></a
    >
    <a target="_blank" rel="noopener" href="https://weibo.com/ryugamine" class="link_l">
      <div
        style="
          background-image: url('../../images/other/dabrFS.png');
        "
      ></div>
      <span>微博</span></a
    >
    <a target="_blank" rel="noopener" href="https://github.com/Anuluca" class="link_l">
      <div
        style="
          background-image: url('../../images/other/dabBo8.png');
        "
      ></div>
      <span>Github</span></a
    >
  </div>
  <div class="languages">
    <span id="side-story" data-id="c22lkZVN0b3J5">裏</span>
    <div>|</div>
    <span>表</span> 
  </div>
</div>

<script src="/js/book-toc.js"></script>


</div>
          </div>
        </div>
      </div>
      <!-- <div class="down-line-zhanwei"></div>
  <div class="down-line"></div> -->
      <a class="off-canvas-overlay" onclick="hide_canvas()"></a>
    </div>
    <div class="bottomline"></div>
    <script src="/js/nprogress.js"></script>
    <link rel="stylesheet" href="/css/nprogress.css" />
    <script src="/js/custom.js"></script>
    <div class="clipboard_success">&nbsp;&nbsp;复制成功！</div>

    <!-- 切换主题的动画效果 -->
    <!-- <div class="change_theme_animes">
      <div
        id="cantSeeAnything_white"
        style="
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background-color: white;
          z-index: 999;
          opacity: 0;
          display: none;
        "
      ></div>
      <div
        id="cantSeeAnything_black"
        style="
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background-color: black;
          z-index: 999;
          opacity: 0;
          display: none;
        "
      ></div>
      <img
        id="nike_shine"
        src="/necrozma_shine.PNG"
        style="
          position: fixed;
          z-index: 998;
          bottom: -400px;
          margin: 0 auto;
          width: 400px;
          left: calc(50% - 200px);
        "
      />
      <img
        id="nike_dark"
        src="/necrozma_dark.PNG"
        style="
          position: fixed;
          z-index: 998;
          bottom: -400px;
          margin: 0 auto;
          width: 400px;
          left: calc(50% - 200px);
        "
      />
      <img
        id="shine"
        src="/tempshine.png"
        style="
          position: fixed;
          z-index: 997;
          bottom: -100px;
          margin: 0 auto;
          width: 100px;
          height: 100px;
          left: calc(50% - 50px);
          opacity: 0;
        "
      />
      <img
        id="absorb"
        src="/tempshine.png"
        style="
          position: fixed;
          z-index: 997;
          bottom: -100vh;
          margin: 0 auto;
          width: 100vw;
          height: 100vh;
          opacity: 0;
        "
      />
    </div> -->
  </body>
</html>


<script src="/js/book.js"></script>

